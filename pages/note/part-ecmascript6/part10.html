<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Set | 秋枫残红的首页</title>
    <meta name="description" content="秋枫残红的前端记录">
    <link rel="icon" href="/logo.png">
    
    <link rel="preload" href="/assets/css/0.styles.1e617c1c.css" as="style"><link rel="preload" href="/assets/js/app.4e796291.js" as="script"><link rel="preload" href="/assets/js/2.5955c47d.js" as="script"><link rel="preload" href="/assets/js/16.5517e456.js" as="script"><link rel="prefetch" href="/assets/js/10.023e598c.js"><link rel="prefetch" href="/assets/js/11.5d456fb5.js"><link rel="prefetch" href="/assets/js/12.a48b2b00.js"><link rel="prefetch" href="/assets/js/13.772c8218.js"><link rel="prefetch" href="/assets/js/14.c9a689e9.js"><link rel="prefetch" href="/assets/js/15.e0615018.js"><link rel="prefetch" href="/assets/js/17.a5c720e2.js"><link rel="prefetch" href="/assets/js/18.5e7781f7.js"><link rel="prefetch" href="/assets/js/19.ce689d57.js"><link rel="prefetch" href="/assets/js/20.093ab0eb.js"><link rel="prefetch" href="/assets/js/21.b6e24c88.js"><link rel="prefetch" href="/assets/js/22.04c63522.js"><link rel="prefetch" href="/assets/js/23.df78c435.js"><link rel="prefetch" href="/assets/js/24.40aa88f0.js"><link rel="prefetch" href="/assets/js/25.a6a9d7e7.js"><link rel="prefetch" href="/assets/js/26.b3e9e28a.js"><link rel="prefetch" href="/assets/js/27.de39e65c.js"><link rel="prefetch" href="/assets/js/28.d2f133d4.js"><link rel="prefetch" href="/assets/js/29.9ff465c5.js"><link rel="prefetch" href="/assets/js/3.d3f6d4b4.js"><link rel="prefetch" href="/assets/js/30.2340f0f7.js"><link rel="prefetch" href="/assets/js/31.267d45b0.js"><link rel="prefetch" href="/assets/js/32.bc086275.js"><link rel="prefetch" href="/assets/js/33.dbe4e841.js"><link rel="prefetch" href="/assets/js/34.a04ad3b1.js"><link rel="prefetch" href="/assets/js/35.b13839ab.js"><link rel="prefetch" href="/assets/js/36.ff7d9cc1.js"><link rel="prefetch" href="/assets/js/37.9e9bda59.js"><link rel="prefetch" href="/assets/js/38.e1285c70.js"><link rel="prefetch" href="/assets/js/39.97f9aab7.js"><link rel="prefetch" href="/assets/js/4.be3fbf0d.js"><link rel="prefetch" href="/assets/js/40.5ccc1141.js"><link rel="prefetch" href="/assets/js/41.9af4572a.js"><link rel="prefetch" href="/assets/js/42.2df722e2.js"><link rel="prefetch" href="/assets/js/43.415554cc.js"><link rel="prefetch" href="/assets/js/44.fb1e0cd2.js"><link rel="prefetch" href="/assets/js/45.d54e6782.js"><link rel="prefetch" href="/assets/js/46.4be2f821.js"><link rel="prefetch" href="/assets/js/47.3a6aa224.js"><link rel="prefetch" href="/assets/js/48.e23e972b.js"><link rel="prefetch" href="/assets/js/49.e844112a.js"><link rel="prefetch" href="/assets/js/5.da4ea6b7.js"><link rel="prefetch" href="/assets/js/50.5b77c8c9.js"><link rel="prefetch" href="/assets/js/51.e6f5c89d.js"><link rel="prefetch" href="/assets/js/6.e197d4ff.js"><link rel="prefetch" href="/assets/js/7.daf8f688.js"><link rel="prefetch" href="/assets/js/8.0a387549.js"><link rel="prefetch" href="/assets/js/9.56278697.js">
    <link rel="stylesheet" href="/assets/css/0.styles.1e617c1c.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/logo.png" alt="秋枫残红的首页" class="logo"> <span class="site-name can-hide">秋枫残红的首页</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">首页</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="学习笔记" class="dropdown-title"><span class="title">学习笔记</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/note/part-html/part1.html" class="nav-link">Html</a></li><li class="dropdown-item"><!----> <a href="/pages/note/part-css/part1.html" class="nav-link">CSS</a></li><li class="dropdown-item"><!----> <a href="/pages/note/part-javascript/part1.html" class="nav-link">Javascript</a></li><li class="dropdown-item"><!----> <a href="/pages/note/part-ecmascript6/part1.html" class="nav-link">ECMAScript6</a></li><li class="dropdown-item"><!----> <a href="/pages/note/part-vue/part1.html" class="nav-link">Vue</a></li><li class="dropdown-item"><!----> <a href="/pages/note/part-react/part1.html" class="nav-link">React</a></li><li class="dropdown-item"><!----> <a href="/pages/note/part-node/part1.html" class="nav-link">Nodejs</a></li><li class="dropdown-item"><!----> <a href="/pages/note/part-sequelize/part1.html" class="nav-link">Sequeize</a></li><li class="dropdown-item"><!----> <a href="/pages/note/part-redis/part1.html" class="nav-link">Redis</a></li><li class="dropdown-item"><!----> <a href="/pages/note/part-tool/part1.html" class="nav-link">开发工具</a></li><li class="dropdown-item"><!----> <a href="/pages/note/part-net/part1.html" class="nav-link">网络</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="日常踩坑" class="dropdown-title"><span class="title">日常踩坑</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/question/part-javascript/part1.html" class="nav-link">Javascript</a></li></ul></div></div><div class="nav-item"><a href="/pages/practice/part1.html" class="nav-link">每日一题</a></div><div class="nav-item"><a href="https://github.com/qiufengcanhong" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">首页</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="学习笔记" class="dropdown-title"><span class="title">学习笔记</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/note/part-html/part1.html" class="nav-link">Html</a></li><li class="dropdown-item"><!----> <a href="/pages/note/part-css/part1.html" class="nav-link">CSS</a></li><li class="dropdown-item"><!----> <a href="/pages/note/part-javascript/part1.html" class="nav-link">Javascript</a></li><li class="dropdown-item"><!----> <a href="/pages/note/part-ecmascript6/part1.html" class="nav-link">ECMAScript6</a></li><li class="dropdown-item"><!----> <a href="/pages/note/part-vue/part1.html" class="nav-link">Vue</a></li><li class="dropdown-item"><!----> <a href="/pages/note/part-react/part1.html" class="nav-link">React</a></li><li class="dropdown-item"><!----> <a href="/pages/note/part-node/part1.html" class="nav-link">Nodejs</a></li><li class="dropdown-item"><!----> <a href="/pages/note/part-sequelize/part1.html" class="nav-link">Sequeize</a></li><li class="dropdown-item"><!----> <a href="/pages/note/part-redis/part1.html" class="nav-link">Redis</a></li><li class="dropdown-item"><!----> <a href="/pages/note/part-tool/part1.html" class="nav-link">开发工具</a></li><li class="dropdown-item"><!----> <a href="/pages/note/part-net/part1.html" class="nav-link">网络</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="日常踩坑" class="dropdown-title"><span class="title">日常踩坑</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/question/part-javascript/part1.html" class="nav-link">Javascript</a></li></ul></div></div><div class="nav-item"><a href="/pages/practice/part1.html" class="nav-link">每日一题</a></div><div class="nav-item"><a href="https://github.com/qiufengcanhong" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>阶段一</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/pages/note/part-ecmascript6/part1.html" class="sidebar-link">let与const</a></li><li><a href="/pages/note/part-ecmascript6/part2.html" class="sidebar-link">数值的扩展</a></li><li><a href="/pages/note/part-ecmascript6/part3.html" class="sidebar-link">解构赋值</a></li><li><a href="/pages/note/part-ecmascript6/part4.html" class="sidebar-link">字符串的扩展</a></li><li><a href="/pages/note/part-ecmascript6/part5.html" class="sidebar-link">模板字符串</a></li><li><a href="/pages/note/part-ecmascript6/part6.html" class="sidebar-link">正则的扩展</a></li><li><a href="/pages/note/part-ecmascript6/part7.html" class="sidebar-link">数组的扩展</a></li><li><a href="/pages/note/part-ecmascript6/part8.html" class="sidebar-link">对象的扩展</a></li><li><a href="/pages/note/part-ecmascript6/part9.html" class="sidebar-link">函数的扩展</a></li><li><a href="/pages/note/part-ecmascript6/part10.html" class="active sidebar-link">set与map</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/pages/note/part-ecmascript6/part10.html#set" class="sidebar-link">Set</a></li><li class="sidebar-sub-header"><a href="/pages/note/part-ecmascript6/part10.html#基本用法" class="sidebar-link">基本用法</a></li><li class="sidebar-sub-header"><a href="/pages/note/part-ecmascript6/part10.html#set的实例属性与方法" class="sidebar-link">Set的实例属性与方法</a></li><li class="sidebar-sub-header"><a href="/pages/note/part-ecmascript6/part10.html#weakset" class="sidebar-link">weakSet</a></li><li class="sidebar-sub-header"><a href="/pages/note/part-ecmascript6/part10.html#map" class="sidebar-link">map</a></li><li class="sidebar-sub-header"><a href="/pages/note/part-ecmascript6/part10.html#基本用法-2" class="sidebar-link">基本用法</a></li><li class="sidebar-sub-header"><a href="/pages/note/part-ecmascript6/part10.html#实例的属性和方法" class="sidebar-link">实例的属性和方法</a></li><li class="sidebar-sub-header"><a href="/pages/note/part-ecmascript6/part10.html#与其他数据结构的相互转化" class="sidebar-link">与其他数据结构的相互转化</a></li><li class="sidebar-sub-header"><a href="/pages/note/part-ecmascript6/part10.html#weakmap" class="sidebar-link">WeakMap</a></li></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h2 id="set"><a href="#set" class="header-anchor">#</a> Set</h2> <h2 id="基本用法"><a href="#基本用法" class="header-anchor">#</a> 基本用法</h2> <ul><li>ES6提供了新的数据结构Set，与数组类似，最大的特点是没有重复值，成员是唯一的</li> <li>Set可以直接当做构造函数使用</li></ul> <div class="language- extra-class"><pre class="language-text"><code>const s = new Set();
[2, 3, 5, 4, 5, 2, 2].forEach(x =&gt; s.add(x));
for (let i of s) {
  console.log(i);
}
// 2 3 5 4
</code></pre></div><ul><li>Set构造函数可以接受一个数组作为构造函数</li></ul> <div class="language- extra-class"><pre class="language-text"><code>const arr=[1,2,3,4,4,4,2,3];
const set=new Set(arr);
for(let e of set){
  console.log(e);
}
//1 2 3 4
</code></pre></div><ul><li>对于set结构加入新值得时候，set不会对值进行强制类型转换，所以5！=“5”，规则与===类似，只是Set结构认为NAN===NAN，另外两个对象也总是不相等的</li></ul> <h2 id="set的实例属性与方法"><a href="#set的实例属性与方法" class="header-anchor">#</a> Set的实例属性与方法</h2> <ul><li>Set有一个size属性用来返回元素的个数</li></ul> <div class="language- extra-class"><pre class="language-text"><code>const arr=[1,2,3,4,4,4,2,3];
const set=new Set(arr);
alert(set.size);
//4
</code></pre></div><ul><li>Set有四个操作方法add,delete,has,clear,这四个方法完全见文知意;</li></ul> <div class="language- extra-class"><pre class="language-text"><code>const arr=[1,2,3,4,4,4,2,3];
const set=new Set(arr);
set.add(5);
//增加元素5，返回新的Set结构
set.delete(1);
//删除元素1，返回true，返回删除成功；
set.has(2);
//查找元素2，返回true，表示有这个元素;
set.clear();
//清空Set，不返回值
</code></pre></div><ul><li>Array.from可以将Set结构转化为数组</li></ul> <div class="language- extra-class"><pre class="language-text"><code>const set=new Set([1,2,3,4,4,4,2,3]);
console.log(Array.from(set));
//[1,2,3,4];
</code></pre></div><ul><li>因此Set结构可用于数组去重</li></ul> <div class="language- extra-class"><pre class="language-text"><code>const arr=[1,2,3,4,4,4,2,3];
console.log([...new Set(arr)]);
</code></pre></div><ul><li>Set也有四个遍历方法keys,values,entries,foreach</li></ul> <div class="language- extra-class"><pre class="language-text"><code>const arr=[1,2,3,4,4,4,2,3];
const set=new Set(arr);
console.log(set.keys());
//返回键名
console.log(set.values());
//返回键值
console.log(set.entries());
//返回键值对
//由于Set结构只有值，没有键，所以keys和values的返回值都是一样的，返回的都属于键值对对象
</code></pre></div><ul><li>foreach()方法与数组的使用方法完全一样</li></ul> <h2 id="weakset"><a href="#weakset" class="header-anchor">#</a> weakSet</h2> <ul><li>weakSet是一种比较特殊的Set，首先它的元素只能是对象，其次它的内部元素都是弱引用，也就是说js的垃圾回收机制在垃圾回收时是不会考虑其中的对象的，比较危险，但从另一个角度来考虑，可以使用weakSet存储DOM节点进行操作，不用担心内存泄露，而且也是在实例中使用，所以不用考虑内存回收的危险。</li> <li>该数据结构的用法与Set基本一样，但是没有size属性和foreach方法</li></ul> <hr> <h2 id="map"><a href="#map" class="header-anchor">#</a> map</h2> <h2 id="基本用法-2"><a href="#基本用法-2" class="header-anchor">#</a> 基本用法</h2> <ul><li>javascript的对象本质上是键值对的集合（hash结构），但是object的局限在与它的键只可以是字符串，因此map结构出现了，它类似与object，但是它的键可以为任意值</li></ul> <div class="language- extra-class"><pre class="language-text"><code>const m = new Map();
const o = {p: 'Hello World'};
m.set(o, 'content')
m.get(o) // &quot;content&quot;
m.has(o) // true
m.delete(o) // true
m.has(o) // false
</code></pre></div><ul><li>Map构造函数接受数组作为参数，实际上执行的是</li></ul> <div class="language- extra-class"><pre class="language-text"><code>const items = [
  ['name', '张三'],
  ['title', 'Author']
];
const map = new Map();
items.forEach(
  ([key, value]) =&gt; map.set(key, value)
);
</code></pre></div><ul><li>事实上任何一个具有iterator接口的，且每个元素都是双元素数组的结构都可以作为参数，也就是说Map和Set都可以作为产生新map的参数</li></ul> <div class="language- extra-class"><pre class="language-text"><code>const set = new Set([
  ['foo', 1],
  ['bar', 2]
]);
const m1 = new Map(set);
m1.get('foo') // 1
const m2 = new Map([['baz', 3]]);
const m3 = new Map(m2);
m3.get('baz') // 3
</code></pre></div><ul><li>如果对一个键多次赋值，那么后面的值会覆盖前面的值</li> <li>读取未知值返回undefined</li> <li>值得注意的是只有对同一个值的引用，Map才将其看做相等的值</li></ul> <div class="language- extra-class"><pre class="language-text"><code>const map = new Map();
const k1 = ['a'];
const k2 = ['a'];
map
.set(k1, 111)
.set(k2, 222);
map.get(k1) // 111
map.get(k2) // 222
</code></pre></div><ul><li>当键为简单数据类型的时候，只需严格相等Map便将其看做相等的，所以true不等于“true”,null不等于ubdefined,但是比较傻逼的是NAN等于NAN</li></ul> <h2 id="实例的属性和方法"><a href="#实例的属性和方法" class="header-anchor">#</a> 实例的属性和方法</h2> <ol><li>size</li></ol> <ul><li>返回属性的数量</li></ul> <div class="language- extra-class"><pre class="language-text"><code>const map = new Map();
map.set('foo', true);
map.set('bar', false);
map.size // 2
</code></pre></div><ol start="2"><li>set(key, value)</li></ol> <ul><li>set方法设置键名key对应的键值为value，然后返回整个 Map 结构。如果key已经有值，则键值会被更新，否则就新生成该键。</li></ul> <div class="language- extra-class"><pre class="language-text"><code>const m = new Map();
m.set('edition', 6)        // 键是字符串
m.set(262, 'standard')     // 键是数值
m.set(undefined, 'nah')    // 键是 undefined
</code></pre></div><ul><li>set方法返回的是当前的map对象，因此可以采用链式写法</li></ul> <div class="language- extra-class"><pre class="language-text"><code>let map = new Map()
  .set(1, 'a')
  .set(2, 'b')
  .set(3, 'c');
</code></pre></div><ol start="3"><li>get(key)</li></ol> <ul><li>get方法读取key对应的键值，如果找不到key，返回undefined。</li></ul> <div class="language- extra-class"><pre class="language-text"><code>const m = new Map();
const hello = function() {console.log('hello');};
m.set(hello, 'Hello ES6!') // 键是函数
m.get(hello)  // Hello ES6!
</code></pre></div><ol start="4"><li>has(key)</li></ol> <ul><li>has方法返回一个布尔值，表示某个键是否在当前 Map 对象之中。</li></ul> <div class="language- extra-class"><pre class="language-text"><code>const m = new Map();

m.set('edition', 6);
m.set(262, 'standard');
m.set(undefined, 'nah');

m.has('edition')     // true
m.has('years')       // false
m.has(262)           // true
m.has(undefined)     // true
</code></pre></div><ol start="5"><li>delete(key)</li></ol> <ul><li>delete方法删除某个键，返回true。如果删除失败，返回false。</li></ul> <div class="language- extra-class"><pre class="language-text"><code>const m = new Map();
m.set(undefined, 'nah');
m.has(undefined)     // true

m.delete(undefined)
m.has(undefined)       // false
</code></pre></div><ol start="6"><li>clear()</li></ol> <ul><li>clear方法清除所有成员，没有返回值。</li></ul> <div class="language- extra-class"><pre class="language-text"><code>let map = new Map();
map.set('foo', true);
map.set('bar', false);

map.size // 2
map.clear()
map.size // 0
</code></pre></div><ol start="7"><li>keys()</li></ol> <ul><li>返回键名的遍历器。</li></ul> <ol start="8"><li>values()</li></ol> <ul><li>返回键值的遍历器。</li></ul> <ol start="9"><li>entries()</li></ol> <ul><li>返回所有成员的遍历器。</li></ul> <ol start="10"><li>forEach()</li></ol> <ul><li>遍历 Map 的所有成员。</li></ul> <div class="language- extra-class"><pre class="language-text"><code>const map = new Map([
  ['F', 'no'],
  ['T',  'yes'],
]);

for (let key of map.keys()) {
  console.log(key);
}
// &quot;F&quot;
// &quot;T&quot;

for (let value of map.values()) {
  console.log(value);
}
// &quot;no&quot;
// &quot;yes&quot;

for (let item of map.entries()) {
  console.log(item[0], item[1]);
}
// &quot;F&quot; &quot;no&quot;
// &quot;T&quot; &quot;yes&quot;

// 或者
for (let [key, value] of map.entries()) {
  console.log(key, value);
}
// &quot;F&quot; &quot;no&quot;
// &quot;T&quot; &quot;yes&quot;

// 等同于使用map.entries()
for (let [key, value] of map) {
  console.log(key, value);
}
// &quot;F&quot; &quot;no&quot;
// &quot;T&quot; &quot;yes&quot;
</code></pre></div><ul><li>map结构的默认遍历方法是entries;</li></ul> <h2 id="与其他数据结构的相互转化"><a href="#与其他数据结构的相互转化" class="header-anchor">#</a> 与其他数据结构的相互转化</h2> <h4 id="map-转为数组"><a href="#map-转为数组" class="header-anchor">#</a> Map 转为数组</h4> <ul><li>使用扩展运算符</li></ul> <div class="language- extra-class"><pre class="language-text"><code>const myMap = new Map()
  .set(true, 7)
  .set({foo: 3}, ['abc']);
[...myMap]
// [ [ true, 7 ], [ { foo: 3 }, [ 'abc' ] ] ]
</code></pre></div><h4 id="map-转为数组-2"><a href="#map-转为数组-2" class="header-anchor">#</a> Map 转为数组</h4> <ul><li>将数组传入 Map 构造函数，就可以转为 Map。</li></ul> <div class="language- extra-class"><pre class="language-text"><code>new Map([
  [true, 7],
  [{foo: 3}, ['abc']]
])
// Map {
//   true =&gt; 7,
//   Object {foo: 3} =&gt; ['abc']
// }
</code></pre></div><h4 id="map-转为对象"><a href="#map-转为对象" class="header-anchor">#</a> Map 转为对象</h4> <ul><li>当键全部为字符串的时候可以转换为Map</li></ul> <div class="language- extra-class"><pre class="language-text"><code>function strMapToObj(strMap) {
  let obj = Object.create(null);
  for (let [k,v] of strMap) {
    obj[k] = v;
  }
  return obj;
}

const myMap = new Map()
  .set('yes', true)
  .set('no', false);
strMapToObj(myMap)
// { yes: true, no: false }
</code></pre></div><h4 id="对象转为-map"><a href="#对象转为-map" class="header-anchor">#</a> 对象转为 Map</h4> <div class="language- extra-class"><pre class="language-text"><code>function objToStrMap(obj) {
  let strMap = new Map();
  for (let k of Object.keys(obj)) {
    strMap.set(k, obj[k]);
  }
  return strMap;
}
objToStrMap({yes: true, no: false})
// Map {&quot;yes&quot; =&gt; true, &quot;no&quot; =&gt; false}
</code></pre></div><h4 id="map-转为-json"><a href="#map-转为-json" class="header-anchor">#</a> Map 转为 JSON</h4> <ul><li>Map 转为 JSON 要区分两种情况。一种情况是，Map 的键名都是字符串，这时可以选择转为对象 JSON。</li></ul> <div class="language- extra-class"><pre class="language-text"><code>function strMapToJson(strMap) {
  return JSON.stringify(strMapToObj(strMap));
}

let myMap = new Map().set('yes', true).set('no', false);
strMapToJson(myMap)
// '{&quot;yes&quot;:true,&quot;no&quot;:false}'
</code></pre></div><ul><li>另一种情况是，Map 的键名有非字符串，这时可以选择转为数组 JSON。</li></ul> <div class="language- extra-class"><pre class="language-text"><code>function mapToArrayJson(map) {
  return JSON.stringify([...map]);
}

let myMap = new Map().set(true, 7).set({foo: 3}, ['abc']);
mapToArrayJson(myMap)
// '[[true,7],[{&quot;foo&quot;:3},[&quot;abc&quot;]]]'
</code></pre></div><h4 id="json-转为-map"><a href="#json-转为-map" class="header-anchor">#</a> JSON 转为 Map</h4> <ul><li>正常情况下，健名全部为字符串</li></ul> <div class="language- extra-class"><pre class="language-text"><code>function jsonToStrMap(jsonStr) {
  return objToStrMap(JSON.parse(jsonStr));
}

jsonToStrMap('{&quot;yes&quot;: true, &quot;no&quot;: false}')
// Map {'yes' =&gt; true, 'no' =&gt; false}
</code></pre></div><h2 id="weakmap"><a href="#weakmap" class="header-anchor">#</a> WeakMap</h2> <ul><li>WeakMap只接受对象作为键名，其他，参考WeakMap......</li></ul></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/pages/note/part-ecmascript6/part9.html" class="prev">函数的扩展</a></span> <!----></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.4e796291.js" defer></script><script src="/assets/js/2.5955c47d.js" defer></script><script src="/assets/js/16.5517e456.js" defer></script>
  </body>
</html>
